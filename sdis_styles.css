/*
 * SDIS - Szklanny Decision Intelligence System
 * Custom CSS Theme - Dark Navy
 */

/* ===== VARIABLES ===== */
:root {
    --primary: #4A90D9;
    --primary-dark: #0a1628;
    --primary-mid: #1a2d4a;
    --success: #10B981;
    --danger: #EF4444;
    --warning: #F59E0B;
    --accent: #64B5F6;
    --grey-dark: #2d3748;
    --grey-mid: #4a5568;
    --grey-light: #718096;
}

/* ===== MAIN BACKGROUND ===== */
.stApp {
    background: linear-gradient(135deg, var(--primary-dark) 0%, #162d50 50%, var(--primary-dark) 100%) !important;
    background-attachment: fixed !important;
}

.stApp::before {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background-image:
        linear-gradient(rgba(100,181,246,0.08) 1px, transparent 1px),
        linear-gradient(90deg, rgba(100,181,246,0.08) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
}

.main .block-container { position: relative; z-index: 1; }

/* ===== HEADER ===== */
header[data-testid="stHeader"] {
    background: linear-gradient(135deg, var(--primary-dark) 0%, #162d50 100%) !important;
    border-bottom: 1px solid rgba(100,181,246,0.2);
}
header[data-testid="stHeader"] button { color: white !important; }
.stDeployButton, [data-testid="stToolbar"] { background: transparent !important; }
[data-testid="stToolbar"] button { color: rgba(255,255,255,0.8) !important; }

/* ===== TEXT ===== */
.stApp, .stApp p, .stApp span, .stApp label, .stApp div { color: rgba(255,255,255,0.9) !important; }
.stApp h1, .stApp h2, .stApp h3, .stApp h4 { color: #ffffff !important; }
.stMarkdown { color: rgba(255,255,255,0.9) !important; }

/* ===== SIDEBAR ===== */
section[data-testid="stSidebar"] {
    background: linear-gradient(180deg, #0d1c30 0%, #162d50 100%) !important;
    border-right: 1px solid rgba(100,181,246,0.2);
}
section[data-testid="stSidebar"] * { color: rgba(255,255,255,0.9) !important; }
section[data-testid="stSidebar"] h1,
section[data-testid="stSidebar"] h2,
section[data-testid="stSidebar"] h3 { color: #ffffff !important; }
section[data-testid="stSidebar"] .stRadio label,
section[data-testid="stSidebar"] .stMultiSelect label,
section[data-testid="stSidebar"] .stSelectbox label { font-weight: 500; }

/* ===== FORM ELEMENTS ===== */
.stSelectbox, .stMultiSelect, .stSlider, .stRadio { background: transparent !important; }
.stSelectbox > div > div, .stMultiSelect > div > div {
    background: var(--grey-dark) !important;
    border: 1px solid rgba(100,181,246,0.4) !important;
    color: white !important;
}
[data-baseweb="popover"], [data-baseweb="menu"] { background: var(--grey-dark) !important; }
[data-baseweb="menu"] li { background: var(--grey-dark) !important; color: white !important; }
[data-baseweb="menu"] li:hover { background: var(--grey-mid) !important; }
.stSelectbox [data-baseweb="select"] span,
.stMultiSelect [data-baseweb="select"] span { color: white !important; }

.stTextInput > div > div > input,
.stNumberInput > div > div > input {
    background: rgba(26,45,74,0.8) !important;
    border: 1px solid rgba(100,181,246,0.3) !important;
    color: white !important;
}

.stRadio > div { background: transparent !important; }
[data-baseweb="tag"] {
    background: var(--grey-mid) !important;
    color: white !important;
    border: 1px solid rgba(100,181,246,0.4) !important;
}
.stCheckbox span[data-baseweb="checkbox"],
.stRadio span[data-baseweb="radio"] {
    background: rgba(26,45,74,0.8) !important;
    border-color: rgba(100,181,246,0.4) !important;
}

/* ===== DATAFRAMES ===== */
.stDataFrame, [data-testid="stDataFrame"] {
    background: var(--grey-dark) !important;
    border-radius: 10px;
    border: 1px solid rgba(100,181,246,0.3) !important;
}
[data-testid="stDataFrame"] * { color: rgba(255,255,255,0.9) !important; }
[data-testid="stDataFrame"] table { background: var(--grey-dark) !important; }
[data-testid="stDataFrame"] th { background: #1a202c !important; color: white !important; }
[data-testid="stDataFrame"] td { background: var(--grey-dark) !important; color: white !important; }
[data-testid="stDataFrame"] tr:hover td { background: var(--grey-mid) !important; }

/* ===== METRICS ===== */
div[data-testid="stMetric"] {
    background: rgba(26,45,74,0.6) !important;
    border-radius: 10px;
    padding: 1rem;
    border: 1px solid rgba(100,181,246,0.25);
    backdrop-filter: blur(10px);
}
div[data-testid="stMetric"] label { color: rgba(255,255,255,0.8) !important; }
div[data-testid="stMetric"] [data-testid="stMetricValue"] {
    font-size: 1.8rem;
    font-weight: 600;
    color: #ffffff !important;
}

/* ===== TABS ===== */
.stTabs [data-baseweb="tab-list"] { gap: 8px; background: transparent !important; }
.stTabs [data-baseweb="tab"] {
    border-radius: 8px 8px 0 0;
    padding: 10px 20px;
    background: rgba(26,45,74,0.5) !important;
    color: rgba(255,255,255,0.8) !important;
    border: 1px solid rgba(100,181,246,0.2) !important;
}
.stTabs [data-baseweb="tab"][aria-selected="true"] {
    background: rgba(74,144,217,0.3) !important;
    color: #ffffff !important;
    border-bottom: 2px solid var(--accent) !important;
}
.stTabs [data-baseweb="tab-panel"] { background: transparent !important; }

/* ===== EXPANDERS ===== */
.streamlit-expanderHeader {
    background: rgba(26,45,74,0.5) !important;
    border-radius: 8px !important;
    color: white !important;
}
details[data-testid="stExpander"] {
    background: rgba(10,22,40,0.4) !important;
    border: 1px solid rgba(100,181,246,0.2) !important;
    border-radius: 8px !important;
}

/* ===== BUTTONS ===== */
.stButton > button {
    background: linear-gradient(135deg, rgba(74,144,217,0.8) 0%, rgba(100,181,246,0.6) 100%) !important;
    color: white !important;
    border: 1px solid rgba(100,181,246,0.4) !important;
    border-radius: 8px !important;
}
.stButton > button:hover {
    background: linear-gradient(135deg, rgba(74,144,217,1) 0%, rgba(100,181,246,0.8) 100%) !important;
    border-color: rgba(100,181,246,0.6) !important;
}
.stDownloadButton > button {
    background: linear-gradient(135deg, rgba(16,185,129,0.8) 0%, rgba(16,185,129,0.6) 100%) !important;
    color: white !important;
    border: 1px solid rgba(16,185,129,0.4) !important;
}

/* ===== ALERTS ===== */
.stAlert {
    background: rgba(26,45,74,0.6) !important;
    border: 1px solid rgba(100,181,246,0.3) !important;
    border-radius: 8px !important;
}
.stAlert > div { color: rgba(255,255,255,0.9) !important; }
div[data-testid="stAlert"][data-baseweb="notification"] {
    background: rgba(16,185,129,0.2) !important;
    border-left: 4px solid var(--success) !important;
}

/* ===== MISC ===== */
.stSpinner > div { border-top-color: var(--accent) !important; }
[data-testid="stFileUploader"] {
    background: rgba(26,45,74,0.4) !important;
    border: 1px dashed rgba(100,181,246,0.4) !important;
    border-radius: 8px !important;
}
code {
    background: rgba(10,22,40,0.8) !important;
    color: var(--accent) !important;
    padding: 2px 6px;
    border-radius: 4px;
}
.js-plotly-plot { background: transparent !important; }

/* ===== CUSTOM CLASSES ===== */
.main-header {
    font-size: 2.5rem;
    font-weight: 700;
    color: #ffffff !important;
    text-align: center;
    margin-bottom: 0.5rem;
}
.sub-header {
    font-size: 1rem;
    color: rgba(255,255,255,0.7) !important;
    text-align: center;
    margin-bottom: 2rem;
}
.metric-box {
    background: linear-gradient(135deg, rgba(10,22,40,0.9) 0%, rgba(26,45,74,0.9) 100%);
    border-radius: 12px;
    padding: 1.25rem;
    color: white !important;
    text-align: center;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    border: 1px solid rgba(74,144,217,0.4);
    backdrop-filter: blur(10px);
}
.metric-card {
    border-radius: 12px;
    padding: 1.25rem;
    margin: 0.5rem 0;
    border: 1px solid rgba(100,181,246,0.2);
    background: rgba(26,45,74,0.5);
    backdrop-filter: blur(10px);
}
.player-card {
    border-radius: 12px;
    padding: 1.25rem;
    margin: 0.5rem 0;
    border: 1px solid rgba(74,144,217,0.2);
    background: linear-gradient(135deg, rgba(10,22,40,0.3) 0%, rgba(26,45,74,0.3) 100%);
    transition: all 0.2s ease;
}
.player-card:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(74,144,217,0.25);
}

/* SPM Indicators */
.spm-positive { color: var(--success) !important; font-weight: bold; }
.spm-negative { color: var(--danger) !important; font-weight: bold; }

/* Risk Badges */
.risk-low {
    background: rgba(16,185,129,0.15);
    color: var(--success);
    padding: 4px 12px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.85rem;
}
.risk-medium {
    background: rgba(245,158,11,0.15);
    color: var(--warning);
    padding: 4px 12px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.85rem;
}
.risk-high {
    background: rgba(239,68,68,0.15);
    color: var(--danger);
    padding: 4px 12px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.85rem;
}

/* Status/Info Boxes */
.info-box {
    padding: 1rem 1.25rem;
    border-radius: 10px;
    margin: 0.75rem 0;
    border-left: 4px solid var(--primary);
    background: rgba(10,22,40,0.4);
}
.success-box {
    padding: 1rem 1.25rem;
    border-radius: 10px;
    margin: 0.75rem 0;
    border-left: 4px solid var(--success);
    background: rgba(16,185,129,0.1);
}
.warning-box {
    padding: 1rem 1.25rem;
    border-radius: 10px;
    margin: 0.75rem 0;
    border-left: 4px solid var(--warning);
    background: rgba(245,158,11,0.1);
}
.danger-box {
    padding: 1rem 1.25rem;
    border-radius: 10px;
    margin: 0.75rem 0;
    border-left: 4px solid var(--danger);
    background: rgba(239,68,68,0.1);
}

/* Sample Size Warning */
.low-n-warning {
    background: var(--warning);
    color: #000;
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 600;
}

/* Significance Indicators */
.sig-indicator { font-size: 0.8rem; padding: 4px 8px; border-radius: 6px; font-weight: 500; }
.sig-yes { background: var(--success); color: white; }
.sig-no { background: rgba(128,128,128,0.3); opacity: 0.8; }
